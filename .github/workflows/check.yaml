name: "check"
on:
    pull_request:
        types: [opened, synchronize, closed]
    push:
        branches: [main]
jobs:
    tests:
        runs-on: ubuntu-latest
        steps:
            - name: Free Disk Space (Ubuntu)
              uses: jlumbroso/free-disk-space@main
              with:
                  # this might remove tools that are actually needed,
                  # if set to "true" but frees about 6 GB
                  tool-cache: true
                  # all of these default to true, but feel free to set to
                  # "false" if necessary for your workflow
                  android: true
                  dotnet: true
                  haskell: true
                  large-packages: true
                  docker-images: true
                  swap-storage: true
            - uses: actions/checkout@main
            - uses: cachix/install-nix-action@main
            - uses: DeterminateSystems/magic-nix-cache-action@main
            - run: nix flake check
